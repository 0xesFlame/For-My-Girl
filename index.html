<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SECURE ARCHIVE</title>
    <style>
        /* –°–ö–†–´–í–ê–ï–ú –ü–û–õ–û–°–£ –ü–†–û–ö–†–£–¢–ö–ò */
        ::-webkit-scrollbar { display: none; }
        body { -ms-overflow-style: none; scrollbar-width: none; }

        body {
            background-color: #000;
            color: #ff3333;
            font-family: 'Courier New', Courier, monospace;
            text-align: center;
            margin: 0; padding: 0;
            min-height: 100vh;
            overflow-x: hidden;
            user-select: none; 
            touch-action: pan-y;
            transition: filter 0.2s, transform 0.5s; 
            text-shadow: 2px 2px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
        }

        /* –ò–ù–î–ò–ö–ê–¢–û–† –ü–†–û–ì–†–ï–°–°–ê */
        #progress-indicator {
            position: fixed; top: 10px; right: 10px;
            background: rgba(0,0,0,0.8); color: #0f0; border: 1px solid #0f0;
            padding: 5px 10px; font-weight: bold; z-index: 9000;
            font-size: 14px; display: none; /* –°–∫—Ä—ã—Ç –¥–æ –≤—Ö–æ–¥–∞ */
        }

        /* --- –•–ê–û–° --- */
        .zoom-in-mode { transform: scale(1.8); }
        .zoom-out-mode { transform: scale(0.4); }
        .fake-cursor {
            position: fixed; width: 20px; height: 30px; 
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="30" viewBox="0 0 320 512"><path fill="white" d="M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 6.407 31.141-12.5 31.141z"/></svg>') no-repeat;
            z-index: 9998; pointer-events: none; transition: 0.1s;
        }
        .fly { position: fixed; font-size: 30px; z-index: 9999; pointer-events: none; transition: top 0.2s, left 0.2s; }
        .chat-notification {
            position: fixed; top: 50px; right: -300px; background: #222; border: 1px solid #0f0; color: #0f0;
            padding: 10px; width: 250px; text-align: left; font-size: 12px; z-index: 9000; transition: right 0.5s;
            box-shadow: 0 0 10px #0f0; text-shadow: none;
        }
        .earthquake-mode { animation: hard-shake 0.1s infinite; }
        @keyframes hard-shake { 0% { transform: translate(5px, 5px) rotate(0deg); } 50% { transform: translate(-5px, -5px) rotate(2deg); } 100% { transform: translate(0, 0) rotate(0); } }
        .taco { position: fixed; top: -50px; font-size: 50px; z-index: 9000; pointer-events: none; animation: fall linear forwards; text-shadow: none; }
        @keyframes fall { to { transform: translateY(110vh) rotate(720deg); } }
        .spin-mode { transform: rotate(360deg); transition: transform 3s; }
        .drunk-mode { transform: scaleY(-1) scaleX(-1); filter: hue-rotate(90deg); }
        .no-cursor { cursor: none !important; }
        .blur-mode { filter: blur(5px); }
        .invert-mode { filter: invert(100%); }
        .pulse-mode { animation: pulse 0.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        #blackout-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; z-index: 10000; pointer-events: none; }

        /* --- UI --- */
        canvas { display: block; position: fixed; top: 0; left: 0; z-index: 0; opacity: 1; pointer-events: none; }
        #login-screen { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; position: relative; background: #000; z-index: 2000; }
        input, button.login-btn { position: relative; z-index: 2001; }
        h1 { margin-bottom: 5px; color: #0f0; text-shadow: 0 0 10px #0f0; }
        .subtitle { color: #fff; margin-bottom: 30px; font-size: 0.8em; opacity: 0.8; text-shadow: none; }
        input { padding: 10px; font-size: 1.2em; background: #111; border: 2px solid #0f0; color: #0f0; text-align: center; outline: none; margin-bottom: 20px; border-radius: 5px; width: 250px; text-shadow: none; }
        button.login-btn { padding: 10px 30px; font-size: 1.2em; background: #0f0; color: #000; border: none; cursor: pointer; font-weight: bold; border-radius: 5px; transition: 0.3s; text-shadow: none; }
        button.login-btn:hover { background: #fff; }
        .error-msg { color: red; display: none; margin-top: 15px; text-shadow: none; }

        #trap-screen {
            display: none; flex-direction: column; align-items: center;
            background-color: rgba(0, 0, 0, 0.4); width: 100%; position: relative; padding-top: 50px;
            z-index: 1; height: 500000px; 
        }
        .trap-title { font-size: 3em; color: #ff0000; text-shadow: 3px 3px 0 #000, 0 0 20px #ff0000; margin-bottom: 10px; padding: 10px; }
        .big-cipher { width: 90%; word-break: break-all; font-size: 10px; opacity: 0.5; color: #880000; text-shadow: none; margin-top: 30px; font-family: monospace; text-align: left; overflow: hidden; height: 200px; mask-image: linear-gradient(to bottom, black 50%, transparent 100%); pointer-events: none; }
        #runaway-btn { position: relative; margin-top: 30px; padding: 15px 30px; background: #ff0000; color: white; font-weight: bold; border: 2px solid white; cursor: pointer; font-size: 1.2em; box-shadow: 0 0 15px red; z-index: 100; transition: top 0.1s, left 0.1s; text-shadow: none; }
        .fake-loader { width: 300px; border: 2px solid #ff3333; padding: 3px; margin: 20px auto; background: black; box-shadow: 0 0 10px #000; }
        .progress-bar { height: 15px; background-color: #ff3333; width: 0%; }
        .toggle-container { margin: 20px; display: flex; align-items: center; justify-content: center; gap: 10px; padding: 5px; border-radius: 10px; z-index: 100; position: relative;}
        .switch { position: relative; display: inline-block; width: 50px; height: 28px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #330000; border: 1px solid red; transition: .4s; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: red; transition: .4s; }
        input:checked + .slider { background-color: #ff3333; }
        input:checked + .slider:before { transform: translateX(22px); background-color: white; }
        .checkbox-container { margin-top: 15px; display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 5px; border-radius: 5px; z-index: 100; position: relative;}
        .checkbox-container input { width: 20px; height: 20px; margin: 0; cursor: pointer; }
        .help-link { margin-top: 30px; font-size: 0.8em; color: #fff; text-decoration: underline; cursor: pointer; background: #000; padding: 5px; text-shadow: none; z-index: 100; position: relative;}
        .help-link:hover { color: red; }
        .popup { position: absolute; background: #ccc; color: black; border: 2px solid blue; padding: 5px; font-family: Arial, sans-serif; font-size: 11px; box-shadow: 5px 5px 10px rgba(0,0,0,0.5); z-index: 50; width: 180px; text-align: left; user-select: none; text-shadow: none; }
        .popup-header { background: blue; color: white; padding: 2px; margin-bottom: 5px; font-weight: bold; }
        .skip-trap-btn { position: fixed; bottom: 20px; right: 20px; background: #ffaa00; color: black; padding: 10px 20px; font-weight: bold; border: 2px solid white; cursor: pointer; z-index: 400; display: none; box-shadow: 0 0 10px yellow; animation: bounce 1s infinite; text-shadow: none; }
        @keyframes bounce { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-5px);} }
        
        .gate-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); z-index: 5000; flex-direction: column; align-items: center; justify-content: center; color: red; border: 5px solid red; text-shadow: none; }
        .gate-box { background: #220000; padding: 20px; border: 2px solid red; max-width: 90%; text-align: center; }
        .timer-display { font-size: 2em; color: #fff; font-weight: bold; margin: 10px 0; border: 1px solid white; padding: 5px; display: inline-block; min-width: 60px; }
        
        .grid-2048 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; background: #555; padding: 5px; border-radius: 5px; margin: 10px auto; width: 240px; height: 240px; }
        .cell-2048 { width: 55px; height: 55px; background: #ccc; display: flex; justify-content: center; align-items: center; font-size: 18px; font-weight: bold; color: #333; border-radius: 3px; text-shadow: none; }
        .c-0 { background: #cdc1b4; color: transparent; } .c-2 { background: #eee4da; } .c-4 { background: #ede0c8; } .c-8 { background: #f2b179; color: #f9f6f2; } .c-16 { background: #f59563; color: #f9f6f2; } .c-32 { background: #f67c5f; color: #f9f6f2; } .c-64 { background: #f65e3b; color: #f9f6f2; } .c-128 { background: #edcf72; color: #f9f6f2; } .c-256 { background: #edcc61; color: #f9f6f2; } .c-512 { background: #edc850; color: #f9f6f2; } .c-1024 { background: #edc53f; color: #f9f6f2; } .c-2048 { background: #edc22e; color: #f9f6f2; box-shadow: 0 0 10px yellow; }
        .controls-2048 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; max-width: 200px; margin: 10px auto; }
        .btn-2048 { padding: 10px; background: #444; color: white; border: 1px solid #777; font-size: 1.2em; cursor: pointer; text-shadow: none;}
        
        .mine-grid { display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px; background: #555; padding: 5px; border-radius: 5px; margin: 10px auto; width: 240px; height: 240px; }
        .mine-cell { width: 28px; height: 28px; background: #ccc; display: flex; justify-content: center; align-items: center; font-size: 14px; font-weight: bold; color: #333; border-radius: 2px; text-shadow: none; cursor: pointer; }
        .mine-revealed { background: #999; }
        .mine-bomb { background: red; }

        #payment-modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; color: black; border: 3px solid blue; padding: 20px; z-index: 6000; width: 300px; text-align: center; box-shadow: 0 0 50px black; text-shadow: none; }
        .pay-btn { background: green; color: white; padding: 10px; border: none; cursor: pointer; }
        #screamer-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; z-index: 9999; align-items: center; justify-content: center; flex-direction: column; }
        .screamer-face { font-size: 8em; animation: shake 0.1s infinite; text-shadow: none;}
        .screamer-text { color: red; font-size: 3em; font-weight: bold; text-shadow: none;}
        .secret-container { position: absolute; bottom: 50px; width: 100%; }
        .secret-text { color: #330000; font-size: 14px; font-weight: bold; transition: color 0.2s; user-select: text; text-shadow: none; }
        .secret-text::selection { background: white; color: black; }
        @keyframes shake { 0% { transform: translate(1px, 1px) rotate(0deg); } 50% { transform: translate(-1px, 2px) rotate(-1deg); } 100% { transform: translate(1px, -1px) rotate(1deg); } }

        .stroop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
        .stroop-btn { padding: 15px; font-weight: bold; border: 2px solid white; cursor: pointer; color: black; text-shadow: none; }
        #hellSlider { width: 100%; margin: 20px 0; }
        #dontPressBtn { width: 150px; height: 150px; border-radius: 50%; background: red; color: white; font-weight: bold; font-size: 1.5em; border: 5px solid darkred; cursor: pointer; box-shadow: 0 0 20px red; text-shadow: none; }

        #checkpoint-notify {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
            background: #00aa00; color: white; padding: 10px 20px; font-weight: bold;
            z-index: 10000; display: none; border: 2px solid white; text-shadow: none;
            box-shadow: 0 0 20px #00ff00;
        }

        #trollText {
            margin-top: 50px; font-size: 2em; color: yellow; text-shadow: none; opacity: 0; transition: opacity 2s;
        }
    </style>
</head>
<body>
    
    <canvas id="matrix"></canvas>
    <div id="blackout-overlay"></div>
    <div id="chat-box" class="chat-notification"></div>
    <div id="checkpoint-notify">üö© –ü–†–û–ì–†–ï–°–° –°–û–•–†–ê–ù–ï–ù</div>
    
    <!-- –ò–ù–î–ò–ö–ê–¢–û–† –ü–†–û–ì–†–ï–°–°–ê -->
    <div id="progress-indicator">SYSTEM PROGRESS: 0.00%</div>

    <div id="login-screen">
        <h1>–°–ò–°–¢–ï–ú–ê –ù–ê–í–ï–î–ï–ù–ò–Ø</h1>
        <div class="subtitle">–í–í–ï–î–ò–¢–ï –ö–û–î –î–õ–Ø –ü–û–õ–£–ß–ï–ù–ò–Ø –ö–û–û–†–î–ò–ù–ê–¢</div>
        <input type="text" id="passwordInput" placeholder="–ö–û–î –î–û–°–¢–£–ü–ê">
        <button class="login-btn" onclick="checkPassword()">–ü–û–õ–£–ß–ò–¢–¨</button>
        <p class="error-msg" id="errorMsg">–ù–ï–í–ï–†–ù–´–ô –ö–û–î</p>
    </div>

    <!-- –î–û–ë–ê–í–ò–õ ONCLICK –î–õ–Ø –†–ê–ù–î–û–ú–ù–´–• –û–ö–û–ù -->
    <div id="trap-screen" onclick="randomPopup(event)">
        <div style="position: sticky; top: 20px; z-index: 200;">
            <div class="trap-title">–í–ó–õ–û–ú –°–ò–°–¢–ï–ú–´</div>
            <p style="text-shadow: 1px 1px 0 #000;">–ü–†–û–¢–û–ö–û–õ –£–ù–ò–ß–¢–û–ñ–ï–ù–ò–Ø –ó–ê–ü–£–©–ï–ù</p>
            <div class="fake-loader"><div class="progress-bar" id="progBar"></div></div>
            <div id="statusText" style="font-size: 0.8em; margin-bottom: 20px; text-shadow: 1px 1px 0 #000;">–£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...</div>
        </div>

        <button id="runaway-btn" onmouseover="moveButton()">–°–ö–ê–ß–ê–¢–¨ –ö–û–û–†–î–ò–ù–ê–¢–´</button>

        <!-- –í–û–°–°–¢–ê–ù–û–í–ò–õ ONCLICK –•–ï–ù–î–õ–ï–†–´ -->
        <div class="toggle-container" onclick="stopProp(event)">
            <span>–°–ª–æ–∂–Ω–æ</span>
            <label class="switch">
                <input type="checkbox" id="trollSwitch" onchange="trollToggle()">
                <span class="slider"></span>
            </label>
            <span>–õ–µ–≥–∫–æ</span>
        </div>

        <div class="checkbox-container" onclick="stopProp(event)">
            <input type="checkbox" id="humanCheck" onchange="noHuman(this)">
            <label for="humanCheck">–Ø –Ω–µ —Ä–æ–±–æ—Ç</label>
        </div>

        <div class="help-link" onclick="triggerScreamer(event)">[ ? ] –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?</div>

        <button class="skip-trap-btn" id="skipTrapBtn" onclick="activateSkipTrap()">‚è© –ü–†–û–ü–£–°–¢–ò–¢–¨ –£–†–û–í–ï–ù–¨</button>
        <div class="big-cipher" id="cipherBlock"></div>

        <div id="trollText" style="position: absolute; top: 405000px; width: 100%;">
            –ü–û–®–£–¢–ò–õ! –≠–¢–û –ë–´–õ –ù–ï –§–ò–ù–ê–õ–¨–ù–´–ô –ë–û–°–°.<br>–°–¢–†–ê–î–ê–ô –î–ê–õ–¨–®–ï.
        </div>

        <div class="secret-container" onclick="stopProp(event)">
            <p class="secret-text">
                –¢—ã –ø—Ä–æ—Å—Ç–æ –≥–µ—Ä–æ–π.<br>
                –°–ª–µ–¥—É—é—â–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ –ø—Ä–∏–∫–ª–µ–µ–Ω–∞ —Å–∫–æ—Ç—á–µ–º<br>
                –ó–ê –¢–í–û–ò–ú –¢–ï–õ–ï–í–ò–ó–û–†–û–ú.
            </p>
        </div>
    </div>

    <!-- === –ì–ï–ô–¢–´ === -->
    <div id="gate1" class="gate-overlay">
        <div class="gate-box"><h2>–ó–ê–©–ò–¢–ê: –ó–ê–ì–ê–î–ö–ê</h2><p id="riddle-text">...</p><input type="text" id="ans1" class="gate-input" placeholder="–û—Ç–≤–µ—Ç..."><br><button class="login-btn" onclick="checkGate1()" style="margin-top:10px;">–û–¢–í–ï–¢–ò–¢–¨</button></div>
    </div>
    <div id="gate2" class="gate-overlay">
        <div class="gate-box"><h2 id="math-title">–ú–ê–¢–ï–ú–ê–¢–ò–ö–ê</h2><p id="math-instr">–†–µ—à–∏ –ø—Ä–∏–º–µ—Ä!</p><div id="math-timer" class="timer-display">20</div><h1 id="math-problem" style="color:white; font-size: 2em; margin: 20px 0;">?</h1><input type="number" id="ans2" class="gate-input" placeholder="–ß–∏—Å–ª–æ..."><br><button class="login-btn" onclick="checkGateMath()" style="margin-top:10px;">–û–¢–í–ï–¢–ò–¢–¨</button></div>
    </div>
    <div id="gateStroop" class="gate-overlay">
        <div class="gate-box"><h2>–¢–ï–°–¢ –ú–û–ó–ì–ê</h2><p>–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É, —Ü–≤–µ—Ç –∫–æ—Ç–æ—Ä–æ–π —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å <b>–¶–í–ï–¢–û–ú –¢–ï–ö–°–¢–ê</b>!</p><h1 id="stroopWord" style="font-size: 3em; background: #000; padding: 10px;">–¢–ï–ö–°–¢</h1><div class="stroop-grid" id="stroopButtons"></div></div>
    </div>
    <div id="gateSlider" class="gate-overlay">
        <div class="gate-box"><h2>–¢–û–ß–ù–û–°–¢–¨</h2><p>–£—Å—Ç–∞–Ω–æ–≤–∏ –ø–æ–ª–∑—É–Ω–æ–∫ —Ä–æ–≤–Ω–æ –Ω–∞ <b id="sliderTargetText">77</b>.</p><p id="sliderVal" style="font-size: 2em; color: white;">0</p><input type="range" id="hellSlider" min="0" max="100" value="0" oninput="updateSlider(this.value)" data-current-val="0"><br><button class="login-btn" onclick="checkSlider()" style="margin-top:10px;">–ì–û–¢–û–í–û</button></div>
    </div>
    <div id="gateType" class="gate-overlay">
        <div class="gate-box"><h2>–¢–ï–°–¢ –ù–ê –ü–û–°–õ–£–®–ù–û–°–¢–¨</h2><p>–ù–∞–ø–µ—á–∞—Ç–∞–π —Ñ—Ä–∞–∑—É –±–µ–∑ –æ—à–∏–±–æ–∫:</p><p id="typeTarget" style="background: #333; padding: 10px; color: yellow; user-select: none;">...</p><div id="type-timer" class="timer-display">15</div><br><input type="text" id="typeInput" placeholder="–ü–µ—á–∞—Ç–∞–π –∑–¥–µ—Å—å..." style="width: 300px;"><br><button class="login-btn" onclick="checkTyping()" style="margin-top:10px;">–ü–†–û–í–ï–†–ò–¢–¨</button></div>
    </div>
    <div id="gateDontPress" class="gate-overlay">
        <div class="gate-box"><h2>–¢–ï–†–ü–ï–ù–ò–ï</h2><p>–ù–ï –Ω–∞–∂–∏–º–∞–π –Ω–∞ –∫—Ä–∞—Å–Ω—É—é –∫–Ω–æ–ø–∫—É!</p><div id="dont-timer" class="timer-display" style="border: none;">10</div><br><br><button id="dontPressBtn" onclick="failGate('–°–∫–∞–∑–∞–Ω–æ –∂–µ –ù–ï –ù–ê–ñ–ò–ú–ê–¢–¨!')">DON'T PRESS</button><button id="passDontBtn" class="login-btn" style="display:none; margin-top: 20px;" onclick="passDontPress()">–ü–†–û–ô–¢–ò</button></div>
    </div>
    <div id="gate3" class="gate-overlay">
        <div class="gate-box"><h2>–ö–õ–ò–ö–ï–†</h2><p>–ù–∞–∂–º–∏ 10 —Ä–∞–∑ –∑–∞ 5 —Å–µ–∫—É–Ω–¥!</p><div id="click-timer" class="timer-display">5.00</div><p>–û—Å—Ç–∞–ª–æ—Å—å: <span id="clickCount" style="color:white; font-size:1.5em;">10</span></p><div style="height: 250px; position: relative; border: 1px dashed #555;"><button id="clickGameBtn" onclick="clickerGame()" style="padding: 10px; background: red; color: white; border: none; font-weight: bold; position: absolute; top: 40%; left: 40%;">–ñ–ú–ò!</button></div><button onclick="startClicker()" id="startClickBtn" style="padding: 10px; background: blue; color: white; border: none; width: 100%; margin-top: 10px;">–ù–ê–ß–ê–¢–¨</button></div>
    </div>
    <div id="gate4" class="gate-overlay">
        <div class="gate-box"><h2>2048</h2><p>–°–æ–±–µ—Ä–∏ —á–∏—Å–ª–æ 2048.</p><div class="grid-2048" id="grid2048"></div><div class="controls-2048"><div></div><button class="btn-2048" onclick="game2048.move('up')">‚¨ÜÔ∏è</button><div></div><button class="btn-2048" onclick="game2048.move('left')">‚¨ÖÔ∏è</button><button class="btn-2048" onclick="game2048.move('down')">‚¨áÔ∏è</button><button class="btn-2048" onclick="game2048.move('right')">‚û°Ô∏è</button></div></div>
    </div>
    <div id="gateMines" class="gate-overlay">
        <div class="gate-box"><h2>–°–ê–ü–ï–†</h2><p>–ù–µ –ø–æ–¥–æ—Ä–≤–∏—Å—å. (8 –º–∏–Ω)</p><div class="mine-grid" id="mineGrid"></div><p style="font-size:0.8em; margin-top:10px;">–ù–∞–∂–º–∏ –Ω–∞ –∫–ª–µ—Ç–∫—É, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å.</p></div>
    </div>

    <div id="payment-modal" onclick="stopProp(event)">
        <h3>–¢–†–ï–ë–£–ï–¢–°–Ø –û–ü–õ–ê–¢–ê</h3><p>–î–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Å–ø—É—Å–∫–∞ –æ–ø–ª–∞—Ç–∏—Ç–µ –∫–æ–º–∏—Å—Å–∏—é.</p>
        <div style="margin-top: 20px; display: flex; justify-content: space-around;">
            <button class="pay-btn" id="payBtn" onmouseover="movePayBtn()">–û–ü–õ–ê–¢–ò–¢–¨ 5000‚ÇΩ</button>
            <button style="padding: 10px;" onclick="closePayment()">–Ø –Ω–∏—â–∞—è, —Ä–µ—à–∏—Ç—å –∑–∞–¥–∞—á—É</button>
        </div>
    </div>

    <div id="screamer-overlay"><div class="screamer-face">üëπ</div><div class="screamer-text">–ë–£!</div></div>

    <script>
        function stopProp(e) { e.stopPropagation(); }

        // --- VISUALS ---
        const canvas = document.getElementById('matrix');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        const katakana = '01';
        const fontSize = 16;
        const columns = canvas.width/fontSize;
        const drops = Array(Math.floor(columns)).fill(1);
        function drawMatrix() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#440000'; ctx.font = fontSize + 'px monospace';
            for(let i = 0; i < drops.length; i++) {
                const text = katakana.charAt(Math.floor(Math.random() * katakana.length));
                ctx.fillText(text, i*fontSize, drops[i]*fontSize);
                if(drops[i]*fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            }
        }
        setInterval(drawMatrix, 30);

        function generateCipher() {
            let chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ@#$%&*<>";
            let str = "";
            for(let i=0; i<3000; i++) {
                str += chars.charAt(Math.floor(Math.random() * chars.length));
                if(i%50 === 0) str += " ";
            }
            document.getElementById('cipherBlock').innerText = str;
        }
        generateCipher();

        // --- LOGIN & INIT ---
        function checkPassword() {
            var input = document.getElementById("passwordInput").value;
            if (input.toUpperCase().trim() === "–ö–ü–Æ–õ–ü") {
                document.getElementById("login-screen").style.display = "none";
                document.getElementById("trap-screen").style.display = "flex";
                document.getElementById("progress-indicator").style.display = "block"; // –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
                startFakeLoading();
                window.addEventListener('scroll', checkScrollTraps);
                startBrokenScroll(); 
                startChaosSystem(); 
            } else {
                document.getElementById("errorMsg").style.display = "block";
                document.getElementById("passwordInput").value = "";
            }
        }

        // --- PROGRESS BAR ---
        window.addEventListener('scroll', function() {
            let scrollTotal = document.body.scrollHeight - window.innerHeight;
            let current = window.scrollY;
            let percent = (current / scrollTotal) * 100;
            if(percent > 100) percent = 100;
            document.getElementById('progress-indicator').innerText = "SYSTEM PROGRESS: " + percent.toFixed(2) + "%";
        });

        // --- TROLL FUNCTIONS (–í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–´) ---
        function moveButton() {
            var btn = document.getElementById("runaway-btn");
            var x = Math.random() * (window.innerWidth - 200);
            if(x<0) x=0;
            var y = Math.random() * 300; 
            btn.style.position = "absolute";
            btn.style.left = x + "px";
            btn.style.top = (y + 150) + "px"; 
        }
        function trollToggle() {
            var chk = document.getElementById("trollSwitch");
            if (chk.checked) { setTimeout(() => { chk.checked = false; alert("–û—à–∏–±–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞!"); }, 300); }
        }
        function noHuman(chk) {
            if (chk.checked) { setTimeout(() => { chk.checked = false; alert("–†–æ–±–æ—Ç–∞–º –≤—Ö–æ–¥ –∑–∞–ø—Ä–µ—â–µ–Ω! ü§ñ"); }, 300); }
        }
        function triggerScreamer(e) {
            e.stopPropagation();
            var scr = document.getElementById("screamer-overlay");
            scr.style.display = "flex";
            var count = 0;
            var inter = setInterval(() => {
                scr.style.backgroundColor = (scr.style.backgroundColor === 'black') ? 'red' : 'black';
                count++;
                if(count > 10) { clearInterval(inter); scr.style.display = "none"; }
            }, 100);
        }
        function randomPopup(e) {
            // –ß—Ç–æ–±—ã –Ω–µ —Å–ø–∞–º–∏–ª–æ, –µ—Å–ª–∏ –∫–ª–∏–∫–Ω—É–ª–∏ –ø–æ –∫–Ω–æ–ø–∫–∞–º
            if(e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT' || e.target.tagName === 'LABEL') return;
            if (Math.random() > 0.4) return; 
            var div = document.createElement("div");
            div.className = "popup";
            div.innerHTML = "<div class='popup-header'>System Error</div>VIRUS DETECTED<br>Sending data...";
            div.style.left = (e.clientX) + "px";
            div.style.top = (e.clientY + window.scrollY) + "px";
            document.body.appendChild(div);
            setTimeout(() => div.remove(), 1500);
        }
        function startFakeLoading() {
            var bar = document.getElementById("progBar");
            var width = 0;
            setInterval(() => {
                if (width >= 100) width = 0;
                else width += 2;
                bar.style.width = width + '%';
            }, 50);
        }

        // --- CHAOS SYSTEM ---
        function startChaosSystem() { setInterval(() => { triggerRandomChaos(); }, 15000); }
        function triggerRandomChaos() {
            if(isGateOpen) return;
            let rand = Math.random();
            if (rand < 0.1) startTacoRain();
            else if (rand < 0.2) triggerEarthquake();
            else if (rand < 0.3) triggerSpin();
            else if (rand < 0.4) triggerBlackout();
            else if (rand < 0.5) triggerFreeze();
            else if (rand < 0.6) triggerBlur();
            else if (rand < 0.7) triggerInvert();
            else if (rand < 0.8) triggerPulse();
            else if (rand < 0.85) triggerChat();
            else if (rand < 0.9) triggerZoom();
            else if (rand < 0.95) triggerFly(); 
            else triggerMultiCursor();
        }
        // Chaos Effects
        function triggerZoom() { document.body.classList.add(Math.random()>0.5?'zoom-in-mode':'zoom-out-mode'); setTimeout(()=>document.body.classList.remove('zoom-in-mode','zoom-out-mode'), 3000); }
        function triggerChat() { 
            let msgs = ["–Ø –≤–∏–∂—É —Ç–µ–±—è...", "–í–∫–ª—é—á–∞—é –∫–∞–º–µ—Ä—É...", "–¢—ã –∫—Ä–∞—Å–∏–≤–∞—è...", "–ü–∞—Ä–æ–ª—å —É–∫—Ä–∞–¥–µ–Ω...", "–£–¥–∞–ª—è—é —Ñ–æ—Ç–æ..."];
            let box = document.getElementById('chat-box');
            box.innerText = "‚ö†Ô∏è –°–ò–°–¢–ï–ú–ê: " + msgs[Math.floor(Math.random()*msgs.length)];
            box.style.right = "20px"; setTimeout(()=>{box.style.right="-300px"},4000);
        }
        function triggerMultiCursor() {
            for(let i=0;i<10;i++){
                let c=document.createElement("div");c.className="fake-cursor";
                c.style.left=Math.random()*window.innerWidth+"px";c.style.top=Math.random()*window.innerHeight+"px";
                document.body.appendChild(c);
                let int=setInterval(()=>{c.style.left=(parseFloat(c.style.left)+(Math.random()*20-10))+"px";c.style.top=(parseFloat(c.style.top)+(Math.random()*20-10))+"px";},100);
                setTimeout(()=>{clearInterval(int);c.remove()},4000);
            }
        }
        function triggerFly() {
            let fly=document.createElement("div");fly.innerText="ü™∞";fly.className="fly";document.body.appendChild(fly);
            let int=setInterval(()=>{fly.style.left=Math.random()*window.innerWidth+"px";fly.style.top=(Math.random()*window.innerHeight+window.scrollY)+"px";},300);
            setTimeout(()=>{clearInterval(int);fly.remove()},5000);
        }
        function startTacoRain() { for(let i=0;i<30;i++){let t=document.createElement("div");t.innerText="üåÆ";t.className="taco";t.style.left=Math.random()*window.innerWidth+"px";t.style.animationDuration=(Math.random()*2+1)+"s";document.body.appendChild(t);setTimeout(()=>t.remove(),4000);}}
        function triggerEarthquake() { document.body.classList.add("earthquake-mode"); setTimeout(() => document.body.classList.remove("earthquake-mode"), 5000); }
        function triggerSpin() { document.body.classList.add("spin-mode"); setTimeout(() => document.body.classList.remove("spin-mode"), 3000); }
        function triggerBlackout() { document.getElementById("blackout-overlay").style.display = "block"; setTimeout(() => document.getElementById("blackout-overlay").style.display = "none", 2000); }
        function triggerFreeze() { document.body.classList.add("no-cursor"); setTimeout(() => document.body.classList.remove("no-cursor"), 3000); }
        function triggerBlur() { document.body.classList.add("blur-mode"); setTimeout(() => document.body.classList.remove("blur-mode"), 3000); }
        function triggerInvert() { document.body.classList.add("invert-mode"); setTimeout(() => document.body.classList.remove("invert-mode"), 3000); }
        function triggerPulse() { document.body.classList.add("pulse-mode"); setTimeout(() => document.body.classList.remove("pulse-mode"), 4000); }

        // --- MAIN LOGIC ---
        let riddleFlags = [false, false, false];
        let mathStage = 0;
        let passedClicker = false, passed2048 = false, passedPayment = false, passedStroop = false, passedSlider = false, passedType = false, passedDontPress = false, passedMines = false;
        let isGateOpen = false; 
        let checkpointReached = false;
        const CHECKPOINT_POS = 290000;

        function checkScrollTraps() {
            if(isGateOpen) return;
            let y = window.scrollY;
            let skipBtn = document.getElementById("skipTrapBtn");

            // Checkpoint
            if(y > CHECKPOINT_POS && !checkpointReached) {
                checkpointReached = true;
                let notif = document.getElementById("checkpoint-notify");
                notif.style.display = "block"; setTimeout(() => notif.style.display = "none", 3000);
            }
            if(y > 400000 && passed2048) document.getElementById('trollText').style.opacity = 1;

            // Skip button trap
            if ((y > 70000 && y < 75000) || (y > 200000 && y < 205000)) skipBtn.style.display = 'block';
            else skipBtn.style.display = 'none';
            
            // Gates
            if (y > 20000 && !riddleFlags[0]) openRiddleGate(0);
            else if (y > 160000 && !riddleFlags[1]) openRiddleGate(1);
            else if (y > 340000 && !riddleFlags[2]) openRiddleGate(2);
            else if (y > 50000 && mathStage < 1) openMathGate(1);
            else if (y > 100000 && mathStage < 2) openMathGate(2);
            else if (y > 180000 && mathStage < 3) openMathGate(3); 
            else if (y > 240000 && mathStage < 4) openMathGate(4); 
            else if (y > 360000 && mathStage < 5) openMathGate(5); 
            else if (y > 80000 && !passedStroop) openStroopGate();
            else if (y > 130000 && !passedSlider) openSliderGate();
            else if (y > 210000 && !passedType) openTypeGate();
            else if (y > 280000 && !passedDontPress) openDontPressGate();
            else if (y > 130000 && !passedPayment && passedSlider) { isGateOpen = true; document.getElementById('payment-modal').style.display = 'block'; document.body.style.overflow = 'hidden'; }
            else if (y > 300000 && !passedClicker) { isGateOpen = true; document.getElementById('gate3').style.display = 'flex'; document.body.style.overflow = 'hidden'; }
            else if (y > 400000 && !passed2048) { isGateOpen = true; game2048.init(); document.getElementById('gate4').style.display = 'flex'; document.body.style.overflow = 'hidden'; }
            else if (y > 430000 && !passedMines) { isGateOpen = true; gameMinesweeper.init(); document.getElementById('gateMines').style.display = 'flex'; document.body.style.overflow = 'hidden'; }
        }

        function startBrokenScroll() { window.addEventListener('scroll', function() { if(!isGateOpen && Math.random() > 0.99) window.scrollBy(0, -200); }); }
        function activateSkipTrap() { alert("–ê–≥–∞, —Ä–∞–∑–º–µ—á—Ç–∞–ª–∞—Å—å! –®–¢–†–ê–§ –ó–ê –õ–ï–ù–¨!"); window.scrollBy(0, -50000); document.getElementById("skipTrapBtn").style.display = 'none'; }
        function movePayBtn() { let btn = document.getElementById("payBtn"); btn.style.position = "relative"; btn.style.left = (Math.random()*200 - 100) + "px"; btn.style.top = (Math.random()*100 - 50) + "px"; }
        function closePayment() { passedPayment = true; isGateOpen = false; document.getElementById('payment-modal').style.display = 'none'; document.body.style.overflow = 'auto'; alert("–ü–ª–∞—Ç–µ–∂ –Ω–µ –ø—Ä–æ—à–µ–ª. –õ–∞–¥–Ω–æ, –ø—Ä–æ—Ö–æ–¥–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ."); }

        function failGate(reason) {
            clearInterval(mathInterval); clearInterval(clickInterval); clearInterval(typeInterval); clearInterval(dontInterval);
            isGateOpen = false;
            document.querySelectorAll('.gate-overlay').forEach(el => el.style.display = 'none');
            document.getElementById('payment-modal').style.display = 'none';
            document.body.style.overflow = 'auto';
            document.getElementById('ans1').value = ""; document.getElementById('ans2').value = ""; document.getElementById('hellSlider').value = 0; document.getElementById('sliderVal').innerText = "0"; document.getElementById('typeInput').value = "";

            if (checkpointReached) {
                alert("–û–®–ò–ë–ö–ê: " + reason + "\n–í–û–ó–í–†–ê–¢ –ù–ê –ß–ï–ö–ü–û–ò–ù–¢!");
                window.scrollTo(0, CHECKPOINT_POS);
                passedClicker = false; passed2048 = false; passedMines = false;
            } else {
                alert("–û–®–ò–ë–ö–ê: " + reason + "\n–ü–û–õ–ù–´–ô –°–ë–†–û–° –°–ò–°–¢–ï–ú–´!\n–ù–ê–ß–ò–ù–ê–ô –°–ù–ê–ß–ê–õ–ê!");
                window.scrollTo(0, 0); 
                riddleFlags = [false, false, false]; mathStage = 0; passedClicker = false; passed2048 = false; passedPayment = false; passedStroop = false; passedSlider = false; passedType = false; passedDontPress = false; passedMines = false;
            }
        }

        // --- GATE LOGIC ---
        let stroopCorrectColor = "";
        function openStroopGate() {
            isGateOpen = true; let colors = ["–ö–†–ê–°–ù–´–ô", "–ó–ï–õ–ï–ù–´–ô", "–°–ò–ù–ò–ô", "–ñ–ï–õ–¢–´–ô"], cssColors = ["red", "lime", "blue", "yellow"];
            let textIdx = Math.floor(Math.random() * 4), colorIdx = Math.floor(Math.random() * 4); while(textIdx === colorIdx) colorIdx = Math.floor(Math.random() * 4); 
            document.getElementById('stroopWord').innerText = colors[textIdx]; document.getElementById('stroopWord').style.color = cssColors[colorIdx]; stroopCorrectColor = cssColors[colorIdx];
            let btnContainer = document.getElementById('stroopButtons'); btnContainer.innerHTML = "";
            let shuffled = [...cssColors].sort(() => 0.5 - Math.random());
            shuffled.forEach(c => { let btn = document.createElement("div"); btn.className = "stroop-btn"; btn.style.background = c; btn.innerText = "–í–´–ë–†–ê–¢–¨"; btn.onclick = function() { checkStroop(c); }; btnContainer.appendChild(btn); });
            document.getElementById('gateStroop').style.display = 'flex'; document.body.style.overflow = 'hidden';
        }
        function checkStroop(color) { if(color === stroopCorrectColor) { passedStroop = true; isGateOpen = false; document.getElementById('gateStroop').style.display = 'none'; document.body.style.overflow = 'auto'; alert("–í–µ—Ä–Ω–æ. –ú–æ–∑–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç."); } else { failGate("–ù–µ —Ç–æ—Ç —Ü–≤–µ—Ç! –ß–∏—Ç–∞–π —É—Å–ª–æ–≤–∏–µ!"); } }

        let sliderTarget = 50;
        function openSliderGate() {
            isGateOpen = true; document.getElementById('gateSlider').style.display = 'flex'; document.body.style.overflow = 'hidden';
            sliderTarget = Math.floor(Math.random() * 80) + 10; document.getElementById('sliderTargetText').innerText = sliderTarget;
            document.getElementById('hellSlider').value = 0; document.getElementById('sliderVal').innerText = "0"; document.getElementById('hellSlider').dataset.currentVal = 0;
        }
        function updateSlider(val) { 
            let jitter = Math.floor(Math.random() * 15) - 7; let finalVal = parseInt(val) + jitter;
            if(finalVal < 0) finalVal = 0; if(finalVal > 100) finalVal = 100;
            document.getElementById('sliderVal').innerText = finalVal; document.getElementById('hellSlider').dataset.currentVal = finalVal;
        }
        function checkSlider() {
            let val = parseInt(document.getElementById('hellSlider').dataset.currentVal);
            if(val == sliderTarget) { passedSlider = true; isGateOpen = false; document.getElementById('gateSlider').style.display = 'none'; document.body.style.overflow = 'auto'; alert("–°–Ω–∞–π–ø–µ—Ä—Å–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å."); } else { failGate("–ù—É–∂–Ω–æ —Ä–æ–≤–Ω–æ " + sliderTarget + ". –£ —Ç–µ–±—è " + val); }
        }

        let typeInterval;
        function openTypeGate() {
            isGateOpen = true; document.getElementById('gateType').style.display = 'flex'; document.body.style.overflow = 'hidden';
            let phrases = ["–Ø –æ–±–µ—â–∞—é –±—ã—Ç—å —Ö–æ—Ä–æ—à–µ–π –¥–µ–≤–æ—á–∫–æ–π", "–Ø –ª—é–±–ª—é —Ä–µ—à–∞—Ç—å —É—Ä–∞–≤–Ω–µ–Ω–∏—è", "–Ø –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–¥–∞–º—Å—è"];
            document.getElementById('typeTarget').innerText = phrases[Math.floor(Math.random() * phrases.length)];
            let time = 15; document.getElementById('type-timer').innerText = time;
            if(typeInterval) clearInterval(typeInterval);
            typeInterval = setInterval(() => { time--; document.getElementById('type-timer').innerText = time; if(time <= 0) { clearInterval(typeInterval); failGate("–°–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω–æ –ø–µ—á–∞—Ç–∞–µ—à—å"); } }, 1000);
        }
        function checkTyping() {
            if(document.getElementById('typeInput').value === document.getElementById('typeTarget').innerText) { clearInterval(typeInterval); passedType = true; isGateOpen = false; document.getElementById('gateType').style.display = 'none'; document.body.style.overflow = 'auto'; alert("–£–º–Ω–∏—Ü–∞."); } else { failGate("–û—à–∏–±–∫–∞ –≤ —Ç–µ–∫—Å—Ç–µ."); }
        }

        let dontInterval;
        function openDontPressGate() {
            isGateOpen = true; document.getElementById('gateDontPress').style.display = 'flex'; document.body.style.overflow = 'hidden';
            document.getElementById('passDontBtn').style.display = 'none'; document.getElementById('dontPressBtn').style.display = 'inline-block';
            let time = 10; document.getElementById('dont-timer').innerText = time;
            if(dontInterval) clearInterval(dontInterval);
            dontInterval = setInterval(() => { time--; document.getElementById('dont-timer').innerText = time; if(time <= 0) { clearInterval(dontInterval); document.getElementById('dontPressBtn').style.display = 'none'; document.getElementById('passDontBtn').style.display = 'inline-block'; } }, 1000);
        }
        function passDontPress() { passedDontPress = true; isGateOpen = false; document.getElementById('gateDontPress').style.display = 'none'; document.body.style.overflow = 'auto'; alert("–¢–µ—Ä–ø–µ–Ω–∏–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–∞–µ—Ç—Å—è."); }

        let clicksLeft = 10, clickGameActive = false, clickInterval;
        function startClicker() {
            if(clickGameActive) return; clickGameActive = true; clicksLeft = 10;
            document.getElementById('clickCount').innerText = clicksLeft; document.getElementById('startClickBtn').style.display = 'none';
            let timeLeft = 5.00; document.getElementById('click-timer').innerText = "5.00";
            if(clickInterval) clearInterval(clickInterval);
            clickInterval = setInterval(() => { timeLeft -= 0.01; document.getElementById('click-timer').innerText = timeLeft.toFixed(2); if (timeLeft <= 0) { clearInterval(clickInterval); clickGameActive = false; document.getElementById('startClickBtn').style.display = 'block'; failGate("–°–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω–æ!"); } }, 10);
        }
        function clickerGame() {
            if (!clickGameActive) return; clicksLeft--; document.getElementById('clickCount').innerText = clicksLeft;
            let btn = document.getElementById('clickGameBtn'); let randX = Math.random() * 200 - 100, randY = Math.random() * 200 - 100;
            btn.style.transform = `translate(${randX}px, ${randY}px)`;
            if (clicksLeft <= 0) { clearInterval(clickInterval); clickGameActive = false; passedClicker = true; isGateOpen = false; document.getElementById('gate3').style.display = 'none'; document.body.style.overflow = 'auto'; alert("–†—É–∫–∏ –±—ã—Å—Ç—Ä—ã–µ."); }
        }

        const game2048 = {
            board: [], score: 0,
            init: function() { this.board = Array(4).fill().map(() => Array(4).fill(0)); this.spawn(); this.spawn(); this.draw(); document.addEventListener('keydown', this.handleKey); },
            spawn: function() { let empty = []; for(let r=0; r<4; r++) for(let c=0; c<4; c++) if(this.board[r][c] === 0) empty.push({r,c}); if(empty.length > 0) { let spot = empty[Math.floor(Math.random() * empty.length)]; this.board[spot.r][spot.c] = Math.random() < 0.9 ? 2 : 4; } },
            draw: function() { let html = ''; let won = false; for(let r=0; r<4; r++) { for(let c=0; c<4; c++) { let val = this.board[r][c]; let cls = 'c-' + val; html += `<div class="cell-2048 ${cls}">${val > 0 ? val : ''}</div>`; if(val === 2048) won = true; } } document.getElementById('grid2048').innerHTML = html; if(won) { setTimeout(() => { alert("–ú–û–õ–û–î–ï–¶! –î–£–ú–ê–ï–®–¨ –≠–¢–û –í–°–Å?"); passed2048 = true; isGateOpen = false; document.getElementById('gate4').style.display = 'none'; document.body.style.overflow = 'auto'; document.removeEventListener('keydown', this.handleKey); }, 500); } },
            move: function(dir) { let moved = false; const rotate = matrix => matrix[0].map((val, index) => matrix.map(row => row[index]).reverse()); let b = this.board; if(dir === 'right') b = rotate(rotate(b)); if(dir === 'down') b = rotate(b); if(dir === 'up') b = rotate(rotate(rotate(b))); for(let r=0; r<4; r++) { let row = b[r].filter(x => x); for(let i=0; i < row.length - 1; i++) { if(row[i] === row[i+1]) { row[i] *= 2; row[i+1] = 0; } } row = row.filter(x => x); while(row.length < 4) row.push(0); if(b[r].join(',') !== row.join(',')) moved = true; b[r] = row; } if(dir === 'right') b = rotate(rotate(b)); if(dir === 'down') b = rotate(rotate(rotate(b))); if(dir === 'up') b = rotate(b); this.board = b; if(moved) { this.spawn(); this.draw(); } },
            handleKey: function(e) { if(e.key === 'ArrowUp') game2048.move('up'); if(e.key === 'ArrowDown') game2048.move('down'); if(e.key === 'ArrowLeft') game2048.move('left'); if(e.key === 'ArrowRight') game2048.move('right'); }
        };

        const gameMinesweeper = {
            rows: 8, cols: 8, mines: 8, grid: [], revealedCount: 0,
            init: function() { this.grid = []; this.revealedCount = 0; let mineLocs = new Set(); while(mineLocs.size < this.mines) mineLocs.add(Math.floor(Math.random() * (this.rows * this.cols))); let container = document.getElementById('mineGrid'); container.innerHTML = ""; for(let r=0; r<this.rows; r++) { this.grid[r] = []; for(let c=0; c<this.cols; c++) { let isMine = mineLocs.has(r*this.cols + c); this.grid[r][c] = { isMine: isMine, revealed: false, neighbors: 0 }; let div = document.createElement("div"); div.className = "mine-cell"; div.dataset.r = r; div.dataset.c = c; div.onclick = () => this.clickCell(r, c); container.appendChild(div); } } for(let r=0; r<this.rows; r++) for(let c=0; c<this.cols; c++) { if(this.grid[r][c].isMine) continue; let count = 0; for(let i=-1; i<=1; i++) for(let j=-1; j<=1; j++) { let nr=r+i, nc=c+j; if(nr>=0 && nr<this.rows && nc>=0 && nc<this.cols && this.grid[nr][nc].isMine) count++; } this.grid[r][c].neighbors = count; } },
            clickCell: function(r, c) { if(this.grid[r][c].revealed) return; if(this.grid[r][c].isMine) { this.revealAll(); setTimeout(() => failGate("–ë—É–º! –¢—ã –ø–æ–¥–æ—Ä–≤–∞–ª–∞—Å—å."), 1000); } else { this.reveal(r, c); if(this.revealedCount === (this.rows*this.cols - this.mines)) { passedMines = true; isGateOpen = false; document.getElementById('gateMines').style.display = 'none'; document.body.style.overflow = 'auto'; alert("–ß–ò–°–¢–û! –¢–´ –í–´–ñ–ò–õ–ê!"); } } },
            reveal: function(r, c) { if(r<0 || r>=this.rows || c<0 || c>=this.cols || this.grid[r][c].revealed) return; this.grid[r][c].revealed = true; this.revealedCount++; let cell = document.querySelector(`.mine-cell[data-r='${r}'][data-c='${c}']`); cell.classList.add("mine-revealed"); if(this.grid[r][c].neighbors > 0) cell.innerText = this.grid[r][c].neighbors; else for(let i=-1; i<=1; i++) for(let j=-1; j<=1; j++) this.reveal(r+i, c+j); },
            revealAll: function() { for(let r=0; r<this.rows; r++) for(let c=0; c<this.cols; c++) if(this.grid[r][c].isMine) { let cell = document.querySelector(`.mine-cell[data-r='${r}'][data-c='${c}']`); cell.classList.add("mine-bomb"); cell.innerText = "üí£"; } }
        };

        const riddles = [ { q: "–ß—Ç–æ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –≤–≤–µ—Ä—Ö, –Ω–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–ø—É—Å–∫–∞–µ—Ç—Å—è?", a: ["–≤–æ–∑—Ä–∞—Å—Ç", "–≥–æ–¥—ã"] }, { q: "–ó–∏–º–æ–π –∏ –ª–µ—Ç–æ–º –æ–¥–Ω–∏–º —Ü–≤–µ—Ç–æ–º?", a: ["–µ–ª–∫–∞", "—ë–ª–∫–∞", "–µ–ª—å", "—Å–æ—Å–Ω–∞"] }, { q: "–ù–µ –ª–∞–µ—Ç, –Ω–µ –∫—É—Å–∞–µ—Ç, –∞ –≤ –¥–æ–º –Ω–µ –ø—É—Å–∫–∞–µ—Ç?", a: ["–∑–∞–º–æ–∫"] }, { q: "–°–∏–¥–∏—Ç –¥–µ–¥, –≤–æ —Å—Ç–æ —à—É–± –æ–¥–µ—Ç, –∫—Ç–æ –µ–≥–æ —Ä–∞–∑–¥–µ–≤–∞–µ—Ç, —Ç–æ—Ç —Å–ª–µ–∑—ã –ø—Ä–æ–ª–∏–≤–∞–µ—Ç?", a: ["–ª—É–∫"] }, { q: "–í–∏—Å–∏—Ç –≥—Ä—É—à–∞, –Ω–µ–ª—å–∑—è —Å–∫—É—à–∞—Ç—å?", a: ["–ª–∞–º–ø–æ—á–∫–∞", "–ª–∞–º–ø–∞"] }, { q: "–ß—Ç–æ –º–æ–∂–Ω–æ —Å–ª–æ–º–∞—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ —Ç—Ä–æ–≥–∞—Ç—å?", a: ["–æ–±–µ—â–∞–Ω–∏–µ", "—Å–ª–æ–≤–æ"] } ];
        let currentRiddleIndex = 0; let activeRiddleStage = 0;
        function openRiddleGate(stage) { isGateOpen = true; activeRiddleStage = stage; currentRiddleIndex = Math.floor(Math.random() * riddles.length); document.getElementById('riddle-text').innerText = riddles[currentRiddleIndex].q; document.getElementById('ans1').value = ""; document.getElementById('gate1').style.display = 'flex'; document.body.style.overflow = 'hidden'; }
        function checkGate1() { let ans = document.getElementById('ans1').value.toLowerCase().trim(); let correctAnswers = riddles[currentRiddleIndex].a; if (correctAnswers.includes(ans)) { riddleFlags[activeRiddleStage] = true; isGateOpen = false; document.getElementById('gate1').style.display = 'none'; document.body.style.overflow = 'auto'; alert("–í–µ—Ä–Ω–æ."); } else { failGate("–ù–µ–≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–≥–∞–¥–∫—É"); } }

        let currentMathAnswer = 0; let mathInterval; let currentMathLevel = 0;
        function openMathGate(level) { isGateOpen = true; currentMathLevel = level; document.getElementById('math-title').innerText = `–ú–ê–¢–ï–ú–ê–¢–ò–ö–ê ${level}/5`; let timeLimit = 20; let probText = ""; let a = Math.floor(Math.random() * 20) + 1; let b = Math.floor(Math.random() * 20) + 1; let c = Math.floor(Math.random() * 10) + 1; if (level <= 2) { let types = ['+', '-']; let type = types[Math.floor(Math.random() * types.length)]; if (type === '+') currentMathAnswer = a + b; else currentMathAnswer = a - b; probText = `${a} ${type} ${b} = ?`; } else { timeLimit = 35 + (level - 3) * 5; let types = ['+', '-', '*']; let t1 = types[Math.floor(Math.random() * types.length)]; let t2 = types[Math.floor(Math.random() * types.length)]; if (t1 === '*') a = Math.floor(Math.random() * 5) + 1; if (t2 === '*') b = Math.floor(Math.random() * 5) + 1; probText = `${a} ${t1} ${b} ${t2} ${c} = ?`; currentMathAnswer = eval(`${a} ${t1} ${b} ${t2} ${c}`); } document.getElementById('math-instr').innerText = `–†–µ—à–∏ –ø—Ä–∏–º–µ—Ä –∑–∞ ${timeLimit} —Å–µ–∫—É–Ω–¥!`; document.getElementById('math-problem').innerText = probText; document.getElementById('ans2').value = ""; document.getElementById('math-timer').innerText = timeLimit; document.getElementById('gate2').style.display = 'flex'; document.body.style.overflow = 'hidden'; if(mathInterval) clearInterval(mathInterval); mathInterval = setInterval(() => { timeLimit--; document.getElementById('math-timer').innerText = timeLimit; if (timeLimit <= 0) { clearInterval(mathInterval); failGate("–í—Ä–µ–º—è –≤—ã—à–ª–æ"); } }, 1000); }
        function checkGateMath() { let ans = parseInt(document.getElementById('ans2').value); if (ans === currentMathAnswer) { clearInterval(mathInterval); mathStage = currentMathLevel; isGateOpen = false; document.getElementById('gate2').style.display = 'none'; document.body.style.overflow = 'auto'; if(mathStage < 5) alert("–£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω."); else alert("–¢–≤–æ–π –º–æ–∑–≥ –µ—â–µ –Ω–µ –≤—Å–∫–∏–ø–µ–ª?"); } else { failGate("–û—à–∏–±–∫–∞ –≤ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö"); } }
    </script>
</body>
</html>
